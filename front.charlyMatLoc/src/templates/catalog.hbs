<section id="page-catalog" class="page">
    <div class="container">
        <h1>Louez du matériel de qualité, à mondre coût</h1>
        <h2>Catalogue des outils</h2>

        <div class="filters mb-4">
            <div class="filter-group category-group">
                <label for="category-filter">Filtrer par catégorie</label>
                <select id="category-filter" class="select">
                    <option value="all" {{#if isAllCategoriesSelected}}selected{{/if}}>Toutes les catégories</option>
                    {{#each categories}}
                    <option value="{{this.id}}" {{#if this.isSelected}}selected{{/if}}>{{this.name}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="filter-group availability-group">
                <label for="availability-start">Disponible du</label>
                <input type="date" id="availability-start" value="{{selectedStartDate}}">
                <span class="filter-separator">au</span>
                <input type="date" id="availability-end" value="{{selectedEndDate}}">
            </div>
            <div class="filter-group filters-actions">
                <button type="button" class="btn btn-secondary btn-sm" id="apply-availability-filter">Appliquer</button>
                {{#if hasAvailabilityFilter}}
                <button type="button" class="btn btn-link btn-sm" id="clear-availability-filter">Réinitialiser</button>
                {{/if}}
            </div>
        </div>

        <div id="tools-container" class="cards-grid">
            {{#if tools}}
            {{#each tools}}
            <a href="#" class="card" data-page="tool-detail" data-id="{{tool_id}}">
                <img src="{{image_url}}" alt="{{name}}" class="card-img">
                <div class="card-content">
                    <h3 class="card-title">{{name}}</h3>
                    <p class="card-text">{{description}}</p>
                    <p class="price">à partir de {{pricing_tiers.[0].price_per_day}}€/jour</p>
                </div>
            </a>
            {{/each}}
            {{else}}
            <div class="card card-static">
                <div class="card-body">
                    <p class="card-text">Aucun article dans le catalogue.</p>
                </div>
            </div>
            {{/if}}
        </div>

        {{#if pagination}}
        <nav class="pagination-nav" aria-label="Pagination">
            <ul class="pagination">
                {{#if pagination.hasPrev}}
                <li><a href="#" class="pagination-link" data-page-nav="{{pagination.prevPage}}">Précédent</a></li>
                {{/if}}

                {{#each pagination.pages}}
                <li><a href="#" class="pagination-link {{#if this.isCurrent}}active{{/if}}" data-page-nav="{{this.number}}">{{this.number}}</a></li>
                {{/each}}

                {{#if pagination.hasNext}}
                <li><a href="#" class="pagination-link" data-page-nav="{{pagination.nextPage}}">Suivant</a></li>
                {{/if}}
            </ul>
        </nav>
        {{/if}}
    </div>
</section>
