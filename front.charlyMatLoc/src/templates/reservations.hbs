<section id="page-reservations" class="page reservations-page">
    <div class="container">
        <header class="reservations-hero">
            <div>
                <p class="reservations-hero__eyebrow">Historique</p>
                <h1>Mes r√©servations</h1>
                <p class="reservations-hero__description">
                    Retrouvez ici l‚Äôensemble de vos locations, leur statut et le d√©tail de chaque mat√©riel.
                </p>
            </div>
            <a href="#" data-page="catalog" class="btn btn-secondary btn-ghost">‚Üê Retour au catalogue</a>
        </header>

        {{#if hasReservations}}
        <div class="reservations-grid">
            {{#each reservations}}
            <article class="reservation-card">
                <div class="reservation-card__top">
                    <div class="reservation-card__identity">
                        <span class="reservation-chip">#{{id}}</span>
                        <h2>R√©servation</h2>
                        <span class="reservation-date">Cr√©√©e le {{formatted_reservation_date}}</span>
                    </div>
                    <span class="reservation-pill status-{{status}}">
                        <span class="reservation-status-icon">{{status_icon}}</span>
                        {{status_label}}
                    </span>
                </div>

                <div class="reservation-card__summary">
                    <div class="summary-badge">
                        <span class="label">Montant total</span>
                        <span class="value">{{total_amount}} ‚Ç¨</span>
                    </div>
                    <div class="summary-badge">
                        <span class="label">Articles</span>
                        <span class="value">{{total_quantity}}</span>
                    </div>
                    <div class="summary-badge">
                        <span class="label">Statut</span>
                        <span class="value with-pill status-{{status}}">
                            <span class="reservation-status-icon">{{status_icon}}</span>
                            {{status_label}}
                        </span>
                    </div>
                </div>

                {{#if items}}
                <div class="reservation-items-list">
                    {{#each items}}
                    <div class="reservation-item-card">
                        <div class="reservation-item-card__header">
                            <div>
                                <h3>{{tool_name}}</h3>
                                <p class="reservation-item-card__id">{{tool_id}}</p>
                            </div>
                            <a href="#" data-page="tool-detail" data-id="{{tool_id}}" class="btn btn-link">Voir la fiche</a>
                        </div>
                        <div class="reservation-item-card__body">
                            <div class="reservation-item-row">
                                <span class="label">P√©riode</span>
                                <span class="value">{{display_period}}</span>
                            </div>
                            <div class="reservation-item-row">
                                <span class="label">Quantit√©</span>
                                <span class="value">{{quantity}}</span>
                            </div>
                            <div class="reservation-item-row">
                                <span class="label">Prix unitaire</span>
                                <span class="value">{{unit_price}} ‚Ç¨</span>
                            </div>
                            <div class="reservation-item-row highlight">
                                <span class="label">Total</span>
                                <span class="value">{{total_price}} ‚Ç¨</span>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
                {{/if}}
            </article>
            {{/each}}
        </div>
        {{else}}
        <div class="reservations-empty card">
            <div class="card-body">
                <span class="reservations-empty__icon">üì¶</span>
                <h2>Aucune r√©servation pour l‚Äôinstant</h2>
                <p>Parcourez le catalogue et r√©servez le mat√©riel dont vous avez besoin en quelques clics.</p>
                <a href="#" data-page="catalog" class="btn btn-primary">D√©couvrir le catalogue</a>
            </div>
        </div>
        {{/if}}
    </div>
</section>
